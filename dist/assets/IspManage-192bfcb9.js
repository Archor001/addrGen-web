import{b as B,W as w,av as V,E as k,r as i,o as F,d as C,h as n,w as c,f as p,e as M,j as N,t as R}from"./index-ce60f707.js";import{a9 as T,b as q,c as j,E as D,a as U}from"./_plugin-vue_export-helper-5e9a901e.js";import{E as r}from"./el-message-2bcd6320.js";import{u as v}from"./address-5bd109e1.js";const G={__name:"IspManage",props:{isp:String,length:Number,edit:{type:Boolean,default:!1}},emits:["success"],setup(_,{emit:f}){const g=_,{t:e}=B(),{isp:l,length:h,edit:I}=w(g);V(m),k(l,m);const t=i({}),u=i(null);function m(){!l.value||l.value.length<=0||(t.value.isp=l.value+"::/"+h.value)}const a=i(!1);function x(){I.value?T.confirm(e("ask.sureToChangeISP"),e("title.warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel")}).then(()=>{u.value.validate(o=>{o&&(a.value=!0,v(t.value.isp).then(s=>{r.success(e("tip.editSuccess")),f("success")}).catch(s=>{r.error(s.data.msg)}).finally(()=>{a.value=!1}))})}):u.value.validate(o=>{o&&(a.value=!0,v(t.value.isp).then(s=>{r.success(e("tip.editSuccess")),f("success")}).catch(s=>{r.error(s.data.msg)}).finally(()=>{a.value=!1}))})}const P={isp:[{required:!0,message:e("holder.plsInputISPPrefix"),trigger:"blur"}]};return(o,s)=>{const S=q,E=j,b=D,y=U;return F(),C("div",null,[n(b,{model:t.value,"label-width":"auto",class:"addr-query-form",ref_key:"ispFormRef",ref:u,rules:P},{default:c(()=>[n(E,{label:p(e)("label.ISPPrefix"),prop:"isp"},{default:c(()=>[n(S,{modelValue:t.value.isp,"onUpdate:modelValue":s[0]||(s[0]=d=>t.value.isp=d),placeholder:p(e)("holder.plsInputISPPrefix")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),M("div",null,[n(y,{type:"primary",onClick:s[1]||(s[1]=d=>x()),loading:a.value,style:{"margin-top":"10px"}},{default:c(()=>[N(R(p(e)("confirm")),1)]),_:1},8,["loading"])])])}}};export{G as _};
